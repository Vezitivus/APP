<!doctype html>
<html lang="lv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Playoff Bracket — Quarterfinals</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    /* ===== Design Tokens (tikai dizains, nekas par datu loģiku) ===== */
    :root {
      --bg:        #0b0f14;
      --bg-soft:   #0f1520;
      --card:      #121826cc; /* ar nelielu caurspīdību stikla efektam */
      --card-solid:#121826;
      --text:      #e6e9ef;
      --muted:     #9aa4b2;
      --accent:    #7c5cff;   /* var nomainīt uz zīmola krāsu */
      --ok:        #19c37d;
      --danger:    #ff5d5d;
      --ring:      #2a3250;
      --shadow:    0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
      --radius:    14px;
      --gap:       clamp(16px, 2vw, 24px);
      --font: ui-sans-serif, system-ui, -apple-system, "SF Pro Text", "Inter", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    @media (prefers-color-scheme: light) {
      :root {
        --bg:        #f7f8fb;
        --bg-soft:   #eef1f7;
        --card:      #ffffffcc;
        --card-solid:#ffffff;
        --text:      #0f172a;
        --muted:     #51607a;
        --ring:      #dfe6f2;
        --shadow:    0 10px 30px rgba(10,20,40,.08), inset 0 1px 0 rgba(255,255,255,.8);
      }
    }

    /* ===== Page chrome ===== */
    html, body { height: 100%; background: radial-gradient(1200px 600px at 80% -10%, #1a2140 0%, var(--bg) 50%) fixed; }
    body {
      margin: 0; font-family: var(--font); color: var(--text);
      background-color: var(--bg);
      -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
    }

    .app {
      min-height: 100%;
      display: grid;
      grid-template-rows: auto 1fr;
    }

    header.appbar {
      position: sticky; top: 0; z-index: 5;
      backdrop-filter: saturate(120%) blur(10px);
      background: linear-gradient(180deg, color-mix(in oklab, var(--card) 86%, transparent), transparent);
      border-bottom: 1px solid var(--ring);
    }
    .appbar__inner {
      max-width: 1200px; margin: 0 auto; padding: 14px max(16px, 4vw);
      display: flex; align-items: center; gap: 14px; justify-content: space-between;
    }
    .brand {
      display: flex; align-items: center; gap: 12px; font-weight: 700; letter-spacing: .2px;
    }
    .brand__dot {
      width: 14px; height: 14px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff8, #fff0), linear-gradient(135deg, var(--accent), #45a2ff);
      box-shadow: 0 0 20px color-mix(in oklab, var(--accent) 40%, transparent);
    }
    .brand__title { font-size: 15px; opacity: .9 }
    .actions { display: flex; align-items: center; gap: 8px; }
    .btn {
      appearance: none; border: 0; border-radius: 999px; padding: 10px 14px;
      font: inherit; color: var(--text); background: var(--card-solid);
      box-shadow: var(--shadow); cursor: pointer; transition: transform .2s ease, background .2s ease;
      border: 1px solid var(--ring);
    }
    .btn:hover { transform: translateY(-1px) }
    .btn--accent { background: linear-gradient(135deg, var(--accent), color-mix(in oklab, var(--accent) 60%, #45a2ff)); color: white; border: none; }
    .btn--ghost { background: transparent; border: 1px solid var(--ring); }

    /* ===== Bracket layout (sākot no Quarterfinals) ===== */
    .stage {
      max-width: 1200px; margin: 28px auto; padding: 0 max(16px, 4vw) 64px;
    }
    .stage__head {
      display: flex; align-items: baseline; justify-content: space-between; gap: 12px; margin-bottom: 12px;
    }
    .stage__title { font-size: clamp(18px, 2.6vw, 22px); font-weight: 700; letter-spacing: .2px; }
    .stage__subtitle { color: var(--muted); font-size: 13px; }

    .bracket {
      position: relative;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr; /* QF | SF | F */
      gap: var(--gap);
      align-items: start;
    }
    /* kolonnām nosaukumi */
    .col { display: grid; gap: var(--gap); align-content: start; }
    .col--qf  { grid-column: 1; }
    .col--sf  { grid-column: 2; }
    .col--fin { grid-column: 3; }

    /* ===== Match card ===== */
    .match {
      position: relative;
      border-radius: var(--radius);
      background: var(--card);
      box-shadow: var(--shadow);
      border: 1px solid var(--ring);
      padding: 14px;
      display: grid;
      gap: 10px;
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
      will-change: transform;
    }
    .match:hover { transform: translateY(-2px); }
    .match__meta {
      display: flex; justify-content: space-between; align-items: center; gap: 10px; font-size: 12px; color: var(--muted);
    }
    .badge {
      display: inline-flex; align-items: center; gap: 8px; border-radius: 999px; padding: 6px 10px;
      background: color-mix(in oklab, var(--card-solid) 70%, transparent); border: 1px solid var(--ring);
    }
    .status { text-transform: uppercase; letter-spacing: .12em; font-weight: 600; }
    .status--live { color: var(--danger); }
    .status--final { color: var(--ok); }

    .team {
      display: grid; grid-template-columns: 1fr auto; align-items: center;
      gap: 10px; padding: 10px 12px; border-radius: 10px; border: 1px solid transparent;
      background: linear-gradient(180deg, transparent, color-mix(in oklab, var(--card-solid) 8%, transparent));
    }
    .team__left {
      display: flex; align-items: center; gap: 10px; min-width: 0;
    }
    .seed {
      width: 26px; height: 26px; border-radius: 50%;
      display: grid; place-items: center; font-weight: 700; font-size: 12px;
      background: color-mix(in oklab, var(--accent) 16%, var(--card-solid));
      border: 1px solid var(--ring);
      box-shadow: inset 0 0 0 1px color-mix(in oklab, white 6%, transparent);
    }
    .name {
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 600; letter-spacing: .2px;
    }
    .score {
      font-feature-settings: "tnum" 1, "ss01" 1;
      font-variant-numeric: tabular-nums; font-weight: 800;
      padding: 4px 8px; border-radius: 8px; border: 1px solid var(--ring);
      background: color-mix(in oklab, var(--card-solid) 60%, transparent);
    }
    .team--winner .score { background: color-mix(in oklab, var(--ok) 24%, var(--card-solid)); border-color: color-mix(in oklab, var(--ok) 40%, var(--ring)); }
    .team--winner { outline: 2px solid color-mix(in oklab, var(--ok) 40%, transparent); outline-offset: -2px; }
    .team--loser .score { opacity: .7; }

    /* ===== Round titles ===== */
    .roundtitle {
      font-size: 12px; text-transform: uppercase; letter-spacing: .14em; color: var(--muted);
      margin-bottom: 6px; padding-left: 4px;
    }

    /* ===== SVG savienojumi starp raundiem ===== */
    .links {
      position: absolute; inset: 0; pointer-events: none; /* tikai vizuāli, nekas klik. */
    }
    .linkPath {
      fill: none; stroke: color-mix(in oklab, var(--ring) 70%, transparent); stroke-width: 2;
    }
    .linkPath--active { stroke: color-mix(in oklab, var(--accent) 55%, var(--ring)); stroke-width: 2.5; }

    /* ===== Responsīvs skats ===== */
    @media (max-width: 980px) {
      .bracket { overflow-x: auto; grid-auto-flow: column; grid-template-columns: repeat(3, min(85vw, 420px)); padding-bottom: 4px; }
    }
    @media (max-width: 560px) {
      .match { padding: 12px }
      .seed { width: 22px; height: 22px; font-size: 11px; }
      .score { padding: 3px 7px }
      .appbar__inner { padding: 12px 16px }
    }

    /* ===== Accessibility tweaks ===== */
    .match:focus-within { outline: 2px solid color-mix(in oklab, var(--accent) 50%, transparent); outline-offset: 2px; }
    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; animation: none !important; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="appbar" role="banner">
      <div class="appbar__inner">
        <div class="brand" aria-label="Playoff aplikācija">
          <span class="brand__dot" aria-hidden="true"></span>
          <span class="brand__title">Playoff Bracket</span>
        </div>
        <div class="actions">
          <button class="btn btn--ghost" id="themeToggle" aria-pressed="false" aria-label="Pārslēgt tēmu">Tēma</button>
          <button class="btn btn--accent">Eksports</button>
        </div>
      </div>
    </header>

    <main class="stage" role="main">
      <div class="stage__head">
        <div>
          <div class="stage__title">Izslēgšanas spēles</div>
          <div class="stage__subtitle">Sākot no ceturtdaļfināliem (QF → SF → Final)</div>
        </div>
      </div>

      <section class="bracket" aria-label="Playoff izkārtojums">
        <!-- SVG savienojumu slānis (tikai dizains) -->
        <svg class="links" id="links" xmlns="http://www.w3.org/2000/svg"></svg>

        <!-- Quarterfinals -->
        <div class="col col--qf" aria-label="Ceturtdaļfināli">
          <div class="roundtitle">Quarterfinals</div>

          <article class="match" id="qf1" tabindex="0" aria-label="QF-1">
            <div class="match__meta">
              <span class="badge">QF-1 • 20:00</span>
              <span class="status status--final">FT</span>
            </div>
            <div class="team team--winner">
              <div class="team__left">
                <span class="seed">1</span>
                <span class="name" data-name>Riga Hawks</span>
              </div>
              <span class="score" data-score>87</span>
            </div>
            <div class="team team--loser">
              <div class="team__left">
                <span class="seed">8</span>
                <span class="name" data-name>Jurmala Tide</span>
              </div>
              <span class="score" data-score>72</span>
            </div>
          </article>

          <article class="match" id="qf2" tabindex="0" aria-label="QF-2">
            <div class="match__meta">
              <span class="badge">QF-2 • 20:00</span>
              <span class="status status--final">FT</span>
            </div>
            <div class="team team--loser">
              <div class="team__left">
                <span class="seed">4</span>
                <span class="name" data-name>Liepaja North</span>
              </div>
              <span class="score" data-score>65</span>
            </div>
            <div class="team team--winner">
              <div class="team__left">
                <span class="seed">5</span>
                <span class="name" data-name>Ventspils Wave</span>
              </div>
              <span class="score" data-score>76</span>
            </div>
          </article>

          <article class="match" id="qf3" tabindex="0" aria-label="QF-3">
            <div class="match__meta">
              <span class="badge">QF-3 • 20:00</span>
              <span class="status">Scheduled</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">2</span>
                <span class="name" data-name>Valmiera Green</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">7</span>
                <span class="name" data-name>Daugavpils Steel</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
          </article>

          <article class="match" id="qf4" tabindex="0" aria-label="QF-4">
            <div class="match__meta">
              <span class="badge">QF-4 • 20:00</span>
              <span class="status status--live">Live</span>
            </div>
            <div class="team team--winner">
              <div class="team__left">
                <span class="seed">3</span>
                <span class="name" data-name>Jelgava Forge</span>
              </div>
              <span class="score" data-score>54</span>
            </div>
            <div class="team team--loser">
              <div class="team__left">
                <span class="seed">6</span>
                <span class="name" data-name>Ogre Storm</span>
              </div>
              <span class="score" data-score>49</span>
            </div>
          </article>
        </div>

        <!-- Semifinals -->
        <div class="col col--sf" aria-label="Pusfināli">
          <div class="roundtitle">Semifinals</div>

          <article class="match" id="sf1" tabindex="0" aria-label="SF-1">
            <div class="match__meta">
              <span class="badge">SF-1 • 21:00</span>
              <span class="status">Scheduled</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Winner QF-1</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Winner QF-2</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
          </article>

          <article class="match" id="sf2" tabindex="0" aria-label="SF-2">
            <div class="match__meta">
              <span class="badge">SF-2 • 21:00</span>
              <span class="status">Scheduled</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Winner QF-3</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Winner QF-4</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
          </article>
        </div>

        <!-- Final -->
        <div class="col col--fin" aria-label="Fināls">
          <div class="roundtitle">Final</div>

          <article class="match" id="final" tabindex="0" aria-label="Final">
            <div class="match__meta">
              <span class="badge">Final • 22:00</span>
              <span class="status">Scheduled</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Winner SF-1</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Winner SF-2</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
          </article>

          <!-- (Neobligāts) spēle par 3. vietu -->
          <div class="roundtitle" style="margin-top: var(--gap);">Third Place</div>
          <article class="match" id="third" tabindex="0" aria-label="Third Place">
            <div class="match__meta">
              <span class="badge">3rd • 20:30</span>
              <span class="status">Scheduled</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Loser SF-1</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
            <div class="team">
              <div class="team__left">
                <span class="seed">?</span>
                <span class="name" data-name>Loser SF-2</span>
              </div>
              <span class="score" data-score>–</span>
            </div>
          </article>
        </div>
      </section>
    </main>
  </div>

  <!-- Neliels, neinvazīvs JS: 1) tēmas pārslēgšana 2) SVG savienojumu zīmēšana starp raundiem -->
  <script>
    // ===== 1) Tēmas pārslēgšana (tikai UI) =====
    (function themeToggle(){
      const btn = document.getElementById('themeToggle');
      if(!btn) return;
      const root = document.documentElement;
      let forced = null;
      btn.addEventListener('click', () => {
        forced = forced === 'light' ? 'dark' : forced === 'dark' ? null : 'light';
        btn.setAttribute('aria-pressed', String(!!forced));
        root.dataset.theme = forced || '';
        if (forced === 'light') document.documentElement.style.colorScheme = 'light';
        else if (forced === 'dark') document.documentElement.style.colorScheme = 'dark';
        else document.documentElement.style.colorScheme = '';
      });
    })();

    // ===== 2) SVG savienojumu zīmēšana (QF → SF → Final) =====
    // Šis tikai "uzvelk līnijas" starp jau esošiem match elementiem pēc ID.
    // Ja tev jau ir sava loģika, pietiek saglabāt šos ID (qf1..qf4, sf1..sf2, final).
    (function bracketLinks(){
      const pairs = [
        ['qf1','sf1'], ['qf2','sf1'],
        ['qf3','sf2'], ['qf4','sf2'],
        ['sf1','final'], ['sf2','final'],
      ];
      const svg = document.getElementById('links');
      if (!svg) return;

      const draw = () => {
        const root = svg.closest('.bracket');
        const r = root.getBoundingClientRect();
        svg.setAttribute('viewBox', `0 0 ${r.width} ${r.height}`);
        svg.setAttribute('width', r.width);
        svg.setAttribute('height', r.height);
        svg.innerHTML = '';

        const pathFor = (fromEl, toEl) => {
          const a = fromEl.getBoundingClientRect();
          const b = toEl.getBoundingClientRect();
          const startX = (a.right - r.left);
          const startY = (a.top + a.height/2 - r.top);
          const endX   = (b.left - r.left);
          const endY   = (b.top + b.height/2 - r.top);
          const midX   = (startX + endX) / 2;

          // Gluds S-curve (Bezier) savienojums
          return `M ${startX} ${startY} C ${midX} ${startY}, ${midX} ${endY}, ${endX} ${endY}`;
        };

        for (const [fromId, toId] of pairs) {
          const fromEl = document.getElementById(fromId);
          const toEl   = document.getElementById(toId);
          if (!fromEl || !toEl) continue;
          const p = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          p.setAttribute('d', pathFor(fromEl, toEl));
          p.setAttribute('class', 'linkPath');
          // ja abi ir “finalizēti”, atzīmē kā aktīvu
          const isActive =
            fromEl.querySelector('.status--final') ||
            toEl.querySelector('.status--final');
          if (isActive) p.classList.add('linkPath--active');
          svg.appendChild(p);
        }
      };

      const ro = new ResizeObserver(draw);
      ro.observe(document.querySelector('.bracket'));
      window.addEventListener('load', draw);
      window.addEventListener('resize', draw);
      // Mazs “raf” delays, lai layout nostabilizējas
      requestAnimationFrame(draw);
    })();

    // ===== 3) (Neobligāti) automātiski iezīmē uzvarētāju pēc skaita =====
    // Šis NEMAINA argumentus – tikai vizuāli salīdzina .score un piešķir klases.
    (function autowin(){
      document.querySelectorAll('.match').forEach(match => {
        const teams = match.querySelectorAll('.team');
        if (teams.length !== 2) return;
        const s = [...teams].map(t => parseInt((t.querySelector('[data-score]')?.textContent||'').trim(),10));
        if (!Number.isFinite(s[0]) || !Number.isFinite(s[1])) return;
        teams[0].classList.toggle('team--winner', s[0] > s[1]);
        teams[0].classList.toggle('team--loser',  s[0] < s[1]);
        teams[1].classList.toggle('team--winner', s[1] > s[0]);
        teams[1].classList.toggle('team--loser',  s[1] < s[0]);
      });
    })();
  </script>
</body>
</html>